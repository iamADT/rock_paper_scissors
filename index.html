<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Rock Paper Scissors Game</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <section class="intro">
            <h1>Rock • Paper • Scissors</h1>
            <h3>Do you have what it takes to win? </h2>
            <p class="title-description">To play the game, please select an option using the 3 buttons below. Once you have selected one, click submit to see your outcome against the computer. <br> You can play up to five times until the game resets.</p>
        </section>
        <section>
                <h4>Please Make a Selection</h4>
        </section>
        <section id="playerOptions">
                <button class="button">rock</button>
                <button class="button">paper</button>
                <button class="button">scissors</button>
        </section>
        <section>
            <p class="yourSelection">Your selection is: <span id="choicePrint"></span></p>
            <button id="submit" >Submit</button>
            <p id="outcome"></p>
        </section>
        <section>
            <h4>Score Board</h4>
            <div class="scoreBoard">
                <div class="scoreDiv">
                    <p>Your Score:</p>
                    <p class="scoreText" id="playerScoreText"></p>
                </div>
                <div class="scoreDiv">
                    <p>Computer Score:</p>
                    <p class="scoreText" id="computerScoreText"></p>
                </div>
                <div class="scoreDiv">
                    <p>Tie Score:</p>
                    <p class="scoreText" id="scoreTieText"></p>
                </div>
            </div>
            <p id="winnerDeclaration"></p>
        </section> 
        <section>
            <button id="restartGame" class="restart">Restart Game</button>
        </section>
    </body>
    <script>

        // Creates a random selection for the computer
        function getComputerChoice (){
            let randomNumber = Math.floor(Math.random() * 3) + 1;
            let randomObject;
            if (randomNumber == 1){
                randomObject = "rock";
            }
            else if (randomNumber == 2){
                randomObject = "scissors";
            }
            else {
                randomObject = "paper";
            }
            return randomObject;
        }

        // DOM Selectors
        let submit = document.querySelector('#submit');
        let choicePrint = document.querySelector('#choicePrint');
        let playerOptions = document.querySelector('#playerOptions');
        let computerScoreText = document.querySelector('#computerScoreText');
        let playerScoreText = document.querySelector('#playerScoreText');
        let scoreTieText = document.querySelector('#scoreTieText')
        let winnerDeclaration = document.querySelector('#winnerDeclaration')
        let restartGame = document.querySelector('#restartGame')
        let button = document.getElementsByClassName('button');
        computerScoreText.textContent = 0;
        playerScoreText.textContent = 0;
        scoreTieText.textContent = 0;
        restartGame.style.display = "none";
        
        
        //Score board initialisation
        let computerScore = 0;
        let playerScore = 0;
        let scoreTie = 0;
        
        // Register players selection
        let playerSelection;
        playerOptions.addEventListener('click', () => {
            winnerDeclaration.textContent = "";
            choicePrint.textContent = event.target.textContent;
            playerSelection = choicePrint.textContent;
            return playerSelection;
        });

        //Record the score based on selection
        function scoreBoard(){
            if (result == "You win"){
                playerScoreText.textContent = playerScore;
            }
            else if (result == "Computer wins") {
                computerScoreText.textContent = computerScore;
            }
            else{
                scoreTieText.textContent = scoreTie;  
            }
        }

        //Play the game when player clicks submits
        submit.addEventListener('click', () => {
            singleRound();
            scoreBoard();

            //When there's a count of 5
            if (playerScore + computerScore + scoreTie == 5){
                document.getElementById("submit").disabled = true;
                choicePrint.textContent = ""
                for (let i = 0; i < button.length; i++) {
                    button[i].disabled = true;
                    button[i].style.borderColor = "#555555";
                    button[i].style.color = "#555555";
                    button[i].style.cursor = "default";
                }
                

                if (computerScore > playerScore){
                    winnerDeclaration.textContent = "Computer wins!";
                    restartGame.style.display = "block";
                }
                else if (playerScore > computerScore){
                    winnerDeclaration.textContent = "You win!";
                    restartGame.style.display = "initial";
                }
                else {
                    winnerDeclaration.textContent = "it's a tie!";
                    restartGame.style.display = "block";
                } 
                submit.style.backgroundColor = "#555555";
                submit.style.cursor = "default"; 
            }
        });
        
        //Function to reset the game after game of 5
        function resetGame () {
                computerScore = 0;
                playerScore = 0;
                scoreTie = 0;
                playerScoreText.textContent = playerScore;
                computerScoreText.textContent = computerScore;
                scoreTieText.textContent = scoreTie;
            restartGame.style.display = "none";
            document.getElementById("submit").disabled = false;
            for (let i = 0; i < button.length; i++) {
                    button[i].disabled = false;
                    button[i].style.borderColor = "";
                    button[i].style.color = "";
                    button[i].style.cursor = "pointer";
                }
                submit.style.backgroundColor = "";
                submit.style.cursor = "pointer"; 
        }
        restartGame.addEventListener('click', resetGame);


        // Plays a single round with the computer and player
        let computerSelection;
        let result;
        function singleRound(playerChoice, computerSelection){
            computerSelection = getComputerChoice();
            playerChoice = playerSelection;

            // If player selects cancel
            if (playerSelection == null) {
                return;
            }

            // If it is a tie
            else if (playerSelection == computerSelection){
                result = "It's a tie"
                scoreTie += 1;
            }

            //Rock Comparisons
            else if (playerSelection == "rock" && computerSelection == "paper"){
                result = "Computer wins";
                computerScore += 1;
            }
            else if (playerSelection == "rock" && computerSelection == "scissors"){
                result = "You win";
                playerScore += 1;
            }

            //Paper Comparisons
            else if (playerSelection == "paper" && computerSelection == "rock"){
                result = "You win";
                playerScore += 1;
            }
            else if (playerSelection == "paper" && computerSelection == "scissors"){
                result = "Computer wins";
                computerScore += 1;
            }

            //Scissor Comparisons
            else if (playerSelection == "scissors" && computerSelection == "rock"){
                result = "Computer wins";
                computerScore += 1;
            }
            else if (playerSelection == "scissors" && computerSelection == "paper"){
                result = "You win";
                playerScore += 1;
            }

            else{
                result = "Something went wrong. Please try again or refresh.";
            }
            console.log(result);
            return result;
        }

    </script>
</html>