<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Rock Paper Scissors Game</title>
    </head>
    <script>

        // Creates a random selection for the computer
        function getComputerChoice (){
            let randomNumber = Math.floor(Math.random() * 3) + 1;
            let randomObject;
            if (randomNumber == 1){
                randomObject = "rock";
            }
            else if (randomNumber == 2){
                randomObject = "scissors";
            }
            else {
                randomObject = "paper";
            }
            return randomObject;
        }

 
        let computerSelection;
        let playerSelection;
        let result;
        let winnerofRound;
        
        // Plays a single round with the computer and player
        function singleRound(playerSelection, computerSelection){
            computerSelection = getComputerChoice();
            console.log(computerSelection);
            playerSelection = prompt("Rock, Paper or Scissors?").toLowerCase();

            // If player selects cancel
            if (playerSelection == null) {
                return;
            }

            // If it is a tie
            else if (playerSelection == computerSelection){
                result = "It's a tie"
            }

            //Rock Comparisons
            else if (playerSelection == "rock" && computerSelection == "paper"){
                result = "Computer wins";
            }
            else if (playerSelection == "rock" && computerSelection == "scissors"){
                result = "You win";
            }

            //Paper Comparisons
            else if (playerSelection == "paper" && computerSelection == "rock"){
                result = "You win";
            }
            else if (playerSelection == "paper" && computerSelection == "scissors"){
                result = "Computer wins";
            }

            //Scissor Comparisons
            else if (playerSelection == "scissors" && computerSelection == "rock"){
                result = "Computer wins";
            }
            else if (playerSelection == "scissors" && computerSelection == "paper"){
                result = "You win";
            }

            else{
                result = "Something went wrong. Please try again or refresh.";
            }
            return result;
        }

        let computerScore = 0;
        let playerScore = 0;
        let scoreTie = 0;

        //Function for a game of 5 with the computer and player
        function game (){
            for (let i = 0; i < 5; i++){
                winnerofRound = singleRound();
                
                if (winnerofRound == undefined)
                {
                    console.log("You cancelled the game.")
                    break;
                }
                else{
                    console.log(winnerofRound);
                }

                //Scores of the game
                if (winnerofRound == "Computer wins"){
                    computerScore = computerScore + 1;
                }
                else if (winnerofRound == "You win"){
                    playerScore = playerScore + 1;
                }
                else {scoreTie = scoreTie + 1}
            }
        }
            
        game();

        //Game Results
        if (playerScore > computerScore) {
            console.log("You won the game of 5");
            }
        else if (computerScore > playerScore) {
            console.log("Computer won the game of 5");
        }
        else {
            "it's a tie in a game of 5"
        }

    </script>
</html>